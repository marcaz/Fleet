#include <rtl.h>
#include <stdlib.h>
#include <stdio.h>
#include "main.h"
#include "leds.h"
#include "uart.h"
#include "acc.h"
#include "acc_api.h"
//----------------------------------------------------------------
OS_TID t_Acc_Update;
//----------------------------------------------------------------
static U64 stk_Acc_Update[768/8];
//----------------------------------------------------------------
__task void Acc_Update(void);
//----------------------------------------------------------------


void create_Acc_Update_task(void){
	//--------------------------------------------------------------------
	t_Acc_Update = os_tsk_create_user (Acc_Update, ACC_TASK_PRIORITY,&stk_Acc_Update, sizeof(stk_Acc_Update));
	//--------------------------------------------------------------------
}

//#define ACC_DEBUG 0
__task void Acc_Update(void){
	//--------------------------------------------------------------------
	int32_t s32buff[3];
	//--------------------------------------------------------------------
	put_log("[LED]: ACC Update Task Started...\r\n");
	//--------------------------------------------------------------------
	for(;;){
		//--------------------------------------------------------------------
		os_dly_wait(200);
		//--------------------------------------------------------------------
		LIS302DL_ReadACC(s32buff);
		//--------------------------------------------------------------------
		#ifdef ACC_DEBUG  
		snprintf(logmsg,MAXLOG,"X: %d Y: %d Z: %d\r\n",s32buff[0],s32buff[1],s32buff[2]);
		put_log(logmsg);
		#endif
		//--------------------------------------------------------------------
	}
	//--------------------------------------------------------------------
}

